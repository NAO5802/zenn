---
title: "ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ“ãƒ«ãƒ€ãƒ¼ã§ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹"
emoji: "ğŸ—‚"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["ãƒ†ã‚¹ãƒˆ","kotlin"]
published: true
---
## ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ“ãƒ«ãƒ€ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ã€€ã¨ã¯

#### ãƒ“ãƒ«ãƒ€ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨

ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨æ„ã™ã‚‹æ–¹æ³•ã®ä¸€ã¤
ãƒ“ãƒ«ãƒ€ãƒ¼ã¯ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®å„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«å¯¾å¿œã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æŒã£ã¦ãŠã‚Šã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯å®‰å…¨ãªå€¤ã§åˆæœŸåŒ–ã•ã‚Œã¦ã„ã‚‹
ãƒ“ãƒ«ãƒ€ãƒ¼ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ãƒ¡ã‚½ãƒƒãƒ‰ã‚’é€šã—ã¦ä¸Šæ›¸ãã—ã€build()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æœ€å¾Œã«å‘¼ã‚“ã æ™‚ã€ãƒ“ãƒ«ãƒ€ãƒ¼ã¯æœ€æ–°ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ã§å¯¾è±¡ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ–°ã—ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã™ã‚‹

## ã“ã‚“ãªæ™‚ã«ä½¿ãˆã‚‹

#### ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®å¯èª­æ€§ã‚¢ãƒƒãƒ—ã—ãŸã„
ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å¼•æ•°ãŒå¤šã„ã¨ã€å®Ÿéš›ã«ãƒ†ã‚¹ãƒˆã§ç¢ºèªã—ãŸã„ãƒ‡ãƒ¼ã‚¿ä»¥å¤–ã«ãƒ€ãƒŸãƒ¼ã®å¼•æ•°ã‚’å¤§é‡ã«æ¸¡ã™ã“ã¨ã«ãªã‚‹
ãã®å ´åˆã€ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆéƒ¨åˆ†ã®ã‚³ãƒ¼ãƒ‰ãŒèª­ã¿ã¥ã‚‰ããªã‚Šã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æ„å›³ã‚‚ä¼ã‚ã‚Šã¥ã‚‰ã„
ãƒ“ãƒ«ãƒ€ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ã¨å¯èª­æ€§ãŒä¸ŠãŒã‚Šã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æ„å›³ã‚‚ä¼ã‚ã‚Šã‚„ã™ããªã‚‹
#### ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ§‹é€ å¤‰æ›´ãŒã‚ã£ãŸæ™‚ã€å¤‰æ›´ã‚³ã‚¹ãƒˆã‚’ä¸‹ã’ãŸã„
å„ãƒ†ã‚¹ãƒˆã§å¯¾è±¡ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¤ãƒ³ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã—ã¦ã„ã‚‹å ´åˆã€å…¨ã¦ã‚’å¤‰æ›´ã—ãªã„ã¨ã„ã‘ãªã„ãŒã€ãƒ“ãƒ«ãƒ€ãƒ¼ã§ã‚ã‚Œã°å¤‰æ›´ç®‡æ‰€ãŒæœ€å°é™ã§æ¸ˆã‚€
ï¼ˆãŸã¨ãˆã°ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å¼•æ•°ãŒè¿½åŠ ã«ãªã£ãŸæ™‚ã€å¤‰æ›´ãŒå¿…è¦ãªã®ã¯ãƒ“ãƒ«ãƒ€ãƒ¼ã¨ãã®å¼•æ•°ã«é–¢é€£ã™ã‚‹ãƒ†ã‚¹ãƒˆã®ã¿ã«ãªã‚‹ï¼‰

## before ~ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ“ãƒ«ãƒ€ãƒ¼ã‚’ä½¿ç”¨ã—ãªã„~
ä¾‹ï¼šOrderã®å‰²å¼•ç‡(DiscountRate)ãŒé•ã†ãƒ‡ãƒ¼ã‚¿ã§ãƒ†ã‚¹ãƒˆã—ãŸã„æ™‚ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹
```kotlin
    @Test
    fun hogeTest() {
        val defaultOrder = Order(
          Customer("tanaka", Address("Taito-ku", "Tokyo", PostCode("110", "0000"))),
          listOf(OrderLine("hat", 1), OrderLine("cape", 1)),
          DiscountRate(BigDecimal.ZERO)
        )
        val discountedOrder = Order(
          Customer("tanaka", Address("Taito-ku", "Tokyo", PostCode("110", "0000"))),
          listOf(OrderLine("hat", 1), OrderLine("cape", 1)),
          DiscountRate(BigDecimal.TEN)
        )
  
        // ....ãƒ†ã‚¹ãƒˆå‡¦ç†
    }
```

## after ~ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ“ãƒ«ãƒ€ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹~

ãƒ“ãƒ«ãƒ€ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ä¸Šè¨˜ã¨åŒã˜ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ
```kotlin
    @Test
    fun hogeTest() {
        val defaultOrder = anOrder().build()
        val discountedOrder = anOrder().withDiscountRate(DisCountRate(BigDecimal.TEN)).build()
        
        // ....ãƒ†ã‚¹ãƒˆå‡¦ç†
    }
```

ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ“ãƒ«ãƒ€ãƒ¼
```kotlin
private data class OrderBuilder(
  private val customer: Customer = Customer("tanaka", Address("Taito-ku", "Tokyo", PostCode("110", "0000"))),
  private val lines: List<OrderLine> = listOf(OrderLine("hat", 1), OrderLine("cape", 1)),
  private val discountRate: DiscountRate = DiscountRate(BigDecimal.ZERO),
) {

  companion object {
    fun anOrder(): OrderBuilder = OrderBuilder()
  }
  fun withCustomer(customer: Customer): OrderBuilder = this.copy(customer = customer)
  fun withOrderLines(lines: List<OrderLine>): OrderBuilder = this.copy(lines = lines)
  fun withDiscountRate(discountRate: DiscountRate): OrderBuilder = this.copy(discountRate = discountRate)

  fun build(): Order = Order(customer, lines, discountRate)
}
```

## note
å„ãƒ¡ã‚½ãƒƒãƒ‰(withâ—‹â—‹â—‹)ã§ç›´æ¥builderã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ä¸Šæ›¸ãã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ãŒã€å‰¯ä½œç”¨ã‚’é¿ã‘ã‚‹ãŸã‚builderè‡ªä½“ã®ã‚³ãƒ”ãƒ¼ã‚’è¿”ã™ã‚ˆã†ã«ã—ãŸ

## å‚è€ƒ
[å®Ÿè·µãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™º](https://www.amazon.co.jp/%E5%AE%9F%E8%B7%B5%E3%83%86%E3%82%B9%E3%83%88%E9%A7%86%E5%8B%95%E9%96%8B%E7%99%BA-Object-Oriented-SELECTION-Freeman/dp/4798124583) - ç¬¬22ç«  è¤‡é›‘ãªãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æ§‹ç¯‰ 